"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[410],{7288:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(5861),a=r(5671),s=r(3144),c=r(7757),i=r.n(c),u=r(4569).default,o=function(){function e(){(0,a.Z)(this,e),this.key="?api_key=4177e902090c804b976fbf3cfd72131d",this.BASE_URL="https://api.themoviedb.org",this.trending="/trending/{media_type}/{time_window}",this.search="/search/movie",this.movieCreadits="/movie/{movie_id}/credits",this.movieReview="/movie/{movie_id}/reviews",this.searchQuery=""}return(0,s.Z)(e,[{key:"fetchMovies",value:function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat(this.BASE_URL,"/3/movie/popular").concat(this.key));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMoviesById",value:function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat(this.BASE_URL,"/3/movie/").concat(t).concat(this.key));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMoviesByName",value:function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat(this.BASE_URL,"/3/search/movie").concat(this.key,"&query=").concat(this.searchQuery));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCastById",value:function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat(this.BASE_URL,"/3/movie/").concat(t,"/credits").concat(this.key));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchReviewById",value:function(){var e=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.get("".concat(this.BASE_URL,"/3/movie/").concat(t,"/reviews").concat(this.key));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}}]),e}()},1610:function(e,t,r){r.r(t),r.d(t,{default:function(){return p}});var n=r(8152),a=r(2791),s=r(5562),c=r.n(s),i=r(8494),u=r(156),o=r(6871),h=r(3528),f=r(7288),l=r(184),m=new f.Z;function v(){var e=(0,o.s0)(),t=(0,o.TH)(),r=(0,a.useState)(""),s=(0,n.Z)(r,2),f=s[0],v=s[1],p=(0,a.useState)(null),d=(0,n.Z)(p,2),y=d[0],x=d[1],k=(0,a.useState)("idle"),w=(0,n.Z)(k,2),g=w[0],Z=w[1];return(0,a.useEffect)((function(){var e=new URLSearchParams(t.search).get("query");v(e),m.query=e,m.fetchMoviesByName().then((function(e){t.search&&!y&&e.data.results.length>0&&(x(e.data.results),Z("resolved"))}))}),[y,t.search]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("form",{className:h.Z.searchForm,onSubmit:function(t){Z("pending"),t.preventDefault(),""!==f.trim()?(m.query=f,m.fetchMoviesByName().then((function(t){t.data.results.length>0?(x(t.data.results),Z("resolved"),e("?query=".concat(f))):Z("rejected")})),v(""),t.target.reset()):c().Notify.warning("Enter a request!!!!!!!")},children:[(0,l.jsxs)("button",{type:"submit",className:h.Z.searchFormButton,children:[(0,l.jsx)(i.Yfv,{})," "]}),(0,l.jsx)("input",{className:h.Z.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search films",onChange:function(e){v(e.currentTarget.value.toLowerCase())}})]}),"resolved"===g&&(0,l.jsx)(u.p,{films:y,query:f})]})}function p(){return(0,l.jsx)(v,{})}},156:function(e,t,r){r.d(t,{p:function(){return i},y:function(){return c}});var n=r(3504),a=r(3528),s=r(184);function c(e){var t=e.films;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Trending films"}),(0,s.jsx)("ul",{children:t.map((function(e){var t=e.id,r=e.original_title;return(0,s.jsx)("li",{className:a.Z.film,children:(0,s.jsx)(n.rU,{to:"movies/".concat(t),className:a.Z.link,state:{pathname:"/"},children:r})},t)}))})]})}function i(e){var t=e.films,r=e.query;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("ul",{children:t.map((function(e){var t=e.id,c=e.original_title;return(0,s.jsx)("li",{className:a.Z.film,children:(0,s.jsx)(n.rU,{to:"".concat(t),className:a.Z.link,state:{pathname:"/movies?query=".concat(r)},children:c})},t)}))})})}}}]);
//# sourceMappingURL=MoviesPage.3d331019.chunk.js.map