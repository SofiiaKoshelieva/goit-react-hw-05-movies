{"version":3,"file":"static/js/MoviesPage.3d331019.chunk.js","mappings":"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","sources":["components/ApiService.jsx","components/Searchbar.jsx","components/MoviesPage.jsx","components/RenderFilms.jsx"],"sourcesContent":["const axios = require('axios').default;\nexport default class ApiService {\n  constructor() {\n    this.key = '?api_key=4177e902090c804b976fbf3cfd72131d';\n    this.BASE_URL = 'https://api.themoviedb.org';\n    this.trending = '/trending/{media_type}/{time_window}';\n    this.search = '/search/movie';\n\n    this.movieCreadits = '/movie/{movie_id}/credits';\n    this.movieReview = '/movie/{movie_id}/reviews';\n    this.searchQuery = '';\n  }\n  async fetchMovies() {\n    const response = await axios.get(\n      `${this.BASE_URL}/3/movie/popular${this.key}`\n    );\n    return response;\n  }\n\n  async fetchMoviesById(id) {\n    const responceById = await axios.get(\n      `${this.BASE_URL}/3/movie/${id}${this.key}`\n    );\n    return responceById;\n  }\n  async fetchMoviesByName() {\n    const fetchMovieByName = await axios.get(\n      `${this.BASE_URL}/3/search/movie${this.key}&query=${this.searchQuery}`\n    );\n    return fetchMovieByName;\n  }\n\n  async fetchCastById(id) {\n    const fetchCastById = await axios.get(\n      `${this.BASE_URL}/3/movie/${id}/credits${this.key}`\n    );\n    return fetchCastById;\n  }\n\n  async fetchReviewById(id) {\n    const fetchReviewById = await axios.get(\n      `${this.BASE_URL}/3/movie/${id}/reviews${this.key}`\n    );\n    return fetchReviewById;\n  }\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import { useState, useEffect } from 'react';\nimport Notiflix from 'notiflix';\nimport { ImSearch } from 'react-icons/im';\nimport { RenderFilms } from './RenderFilms';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport s from './movies.module.css';\nimport ApiService from './ApiService';\nconst apiService = new ApiService();\nexport default function Searchbar() {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const [inputValue, setValue] = useState('');\n  const [films, setFilms] = useState(null);\n  const [status, setStatus] = useState('idle');\n  useEffect(() => {\n    const prevSearch = new URLSearchParams(location.search).get('query');\n    setValue(prevSearch);\n    apiService.query = prevSearch;\n    apiService.fetchMoviesByName().then(data => {\n      if (location.search && !films) {\n        if (data.data.results.length > 0) {\n          setFilms(data.data.results);\n          setStatus('resolved');\n        }\n      }\n    });\n  }, [films, location.search]);\n\n  function onInputChange(e) {\n    setValue(e.currentTarget.value.toLowerCase());\n  }\n  function onFormSubmit(e) {\n    setStatus('pending');\n    e.preventDefault();\n    if (inputValue.trim() === '') {\n      Notiflix.Notify.warning('Enter a request!!!!!!!');\n      return;\n    }\n    apiService.query = inputValue;\n    apiService.fetchMoviesByName().then(data => {\n      if (data.data.results.length > 0) {\n        setFilms(data.data.results);\n        setStatus('resolved');\n        navigate(`?query=${inputValue}`);\n      } else {\n        setStatus('rejected');\n      }\n    });\n    setValue('');\n    e.target.reset();\n  }\n  return (\n    <>\n      <form className={s.searchForm} onSubmit={onFormSubmit}>\n        <button type=\"submit\" className={s.searchFormButton}>\n          <ImSearch />{' '}\n        </button>\n\n        <input\n          className={s.searchFormInput}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search films\"\n          onChange={onInputChange}\n        />\n      </form>\n      {status === 'resolved' && (\n        <RenderFilms films={films} query={inputValue} />\n      )}\n    </>\n  );\n}\n","import Searchbar from './Searchbar';\n\nexport default function MoviesPage() {\n  return <Searchbar />;\n}\n","import { Link } from 'react-router-dom';\nimport s from '../components/movies.module.css';\nfunction TrendingFilms({ films }) {\n  return (\n    <>\n      <h1>Trending films</h1>\n      <ul>\n        {films.map(({ id, original_title }) => (\n          <li key={id} className={s.film}>\n            <Link\n              to={`movies/${id}`}\n              className={s.link}\n              state={{ pathname: '/' }}\n            >\n              {original_title}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n}\nfunction RenderFilms({ films, query }) {\n  return (\n    <>\n      <ul>\n        {films.map(({ id, original_title }) => (\n          <li key={id} className={s.film}>\n            <Link\n              to={`${id}`}\n              className={s.link}\n              state={{ pathname: `/movies?query=${query}` }}\n            >\n              {original_title}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n}\n\nexport { TrendingFilms, RenderFilms };\n"],"names":["axios","require","ApiService","this","key","BASE_URL","trending","search","movieCreadits","movieReview","searchQuery","get","response","id","responceById","fetchMovieByName","fetchCastById","fetchReviewById","newQuery","apiService","Searchbar","navigate","useNavigate","location","useLocation","useState","inputValue","setValue","films","setFilms","status","setStatus","useEffect","prevSearch","URLSearchParams","query","fetchMoviesByName","then","data","results","length","className","s","onSubmit","e","preventDefault","trim","target","reset","Notiflix","type","autoComplete","autoFocus","placeholder","onChange","currentTarget","value","toLowerCase","RenderFilms","MoviesPage","TrendingFilms","map","original_title","to","state","pathname"],"sourceRoot":""}